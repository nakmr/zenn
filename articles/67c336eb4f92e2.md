---
title: "関数型プログラミングによるドメインの防御をPythonで実践してみる（仮）"
emoji: "😊"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["Python", "関数型プログラミング"]
published: false
publication_name: "acntechjp"
---

あなたはIT技術記事作成のプロフェッショナルです。
下記は私が記事を作成するにあたって、記事に記載したい内容の箇条書きです。
内容を整理して、ブログ記事にしてください。
また、記事の先頭には「はじめに」という章を設けて、本記事の概要について記載してください

---
# 記事で書きたいこと
- 自分は関数型プログラミングについて学んでおり、Pythonを使った実践をしたい
- 実践では、LLMとチャットするアプリの作成を通して、関数型プログラミングを実践する

# 要素の分割
- 関数型プログラミングの実践では、副作用の有無によって、まずは、必要な要素を分解したい

| 要素の順番 | 要素                                                    | 要素の概要                                                                         | 副作用の有無                                                 |
| ---------- | ------------------------------------------------------- | ---------------------------------------------------------------------------------- | ------------------------------------------------------------ |
| 1          | ユーザからのメッセージ受付                              | ユーザがLLMに送信するメッセージを受け取る                                          | あり；データを受け取っており、チャット状態を変更しているため |
| 2          | LLMとの通信に必要なコンフィグ設定やペイロード作成を行う | 外部APIを利用するために必要なAPIキーの設定やHTTPリクエストの組み立てを行う         | なし；要素の外側を変更していないため                         |
| 3          | 過去のメッセージを取得する                              | 初回のメッセージングでない場合は、過去のメッセージを取得して、ペイロードに追加する | あり？：データの読み込みが発生するため                       |
| 4          | LLMにリクエストを送信する                               | 外部APIにリクエストを送信して、LLMにリクエストを送信する                           | あり；外部APIへのHTTP通信を起こしているため                  |
| 5          | レスポンスを受信する                                    | 外部APIからのリクエストを受信して、HTTP通信の成功・失敗に応じた後続処理を行う      | あり？；通信失敗時に例外処理が必要なため                     |
| 6          | レスポンスを保存する                                    | チャット履歴を残す必要があるため、レスポンスを保存する                             | あり；データの書き込み処理が発生するため                     |
| 7          | ユーザにメッセージを表示する                            | LLMからのレスポンスをユーザに表示する                                              | あり：コンソールへに文字列を表示するため                     |

- これらの要素それぞれを、一つの関数として表現する。
- 副作用がない要素は純粋関数として、副作用がある要素は非純粋関数として扱う

# 純粋関数と非純粋関数の関係
- 純粋関数と非純粋関数の関係には、「非純粋関数の引数に、純粋関数を入れる」と考えてみる
  - 理由は、副作用のない処理は、副作用がないまま、単独の関数であるべき、と考えるから。つまり、副作用のない処理（純粋関数）から、副作用のある処理を呼ばない、ということ
- 